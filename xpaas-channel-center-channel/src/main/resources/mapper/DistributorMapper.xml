<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.deepexi.channel.mapper.DistributorGradeMapper">


    <select id="findPage" parameterType="com.deepexi.channel.domain.distributor.DistributorQuery"
            resultType="com.deepexi.channel.domain.distributor.DistributorDO">

        SELECT * FROM cc_distributor WHERE dr=0

        <if test="id != null">
            and id = #{id}
        </if>
        <if test="ids != null">
          and id in
            <foreach collection="ids" item="tempId" index="index" open="(" close=")" separator=",">
                #{tempId}
            </foreach>
        </if>

        <if test="distributorName!=null">
            AND distributor_name LIKE concat('%',#{distributorName},'%')
        </if>
        <if test="distributorType!=null">
            AND distributor_type=#{distributorType}
        </if>
        <if test="distributorCode!=null">
            AND distributor_code =#{distributorCode}
        </if>
        <if test="updateStartTime!=null">
            AND DATE_FORMAT(created_time,'%Y-%m-%d') <![CDATA[ >= ]]>DATE_FORMAT(#{startTime},'%Y-%m-%d')
        </if>
        <if test="endTime!=null">
            AND DATE_FORMAT(created_time,'%Y-%m-%d') <![CDATA[ <= ]]>DATE_FORMAT(#{endTime},'%Y-%m-%d')
        </if>
        <if test="startTime!=null">
            AND DATE_FORMAT(updated_time,'%Y-%m-%d') <![CDATA[ >= ]]>DATE_FORMAT(#{updateStartTime},'%Y-%m-%d')
        </if>
        <if test="updateEndTime!=null">
            AND DATE_FORMAT(updated_time,'%Y-%m-%d') <![CDATA[ <= ]]>DATE_FORMAT(#{updateEndTime},'%Y-%m-%d')
        </if>
        order by updated_time desc
    </select>

</mapper>