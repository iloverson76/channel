<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.deepexi.channel.mapper.DistributorGradeMapper">

    <select id="findPage" parameterType="com.deepexi.channel.domain.DistributorGradeQuery"
            resultType="com.deepexi.channel.domain.DistributorGradeDO">

        SELECT * FROM cc_distributor_grade WHERE dr=0

        <if test="id != null">
            and id = #{id}
        </if>
        <if test="ids != null">
          and id in
            <foreach collection="ids" item="tempId" index="index" open="(" close=")" separator=",">
                #{tempId}
            </foreach>
        </if>

        <if test="distributorGradeName!=null">
            AND distributor_grade_name LIKE concat('%',#{distributorGradeName},'%')
        </if>
        <if test="distributorGradeCode!=null">
            AND distributor_grade_code LIKE concat('%',#{distributorGradeCode},'%')
        </if>
        <if test="startTime != null">
            and created_time &gt;= #{startTime}
        </if>
        <if test="endTime != null">
            and created_time &lt;= #{endTime}
        </if>
        <if test="updateStartTime != null">
            and updated_time &gt;= #{updateStartTime}
        </if>
        <if test="updateEndTime != null">
            and updated_time &lt;= #{updateEndTime}
        </if>
        order by updated_time desc
    </select>

    <select id="listParentNodesForCreate" resultType="com.deepexi.channel.domain.DistributorGradeDO">

       SELECT * FROM cc_distributor_grade WHERE dr=0 and grade_system_id= #{systemId} and path LIKE concat('%',#{path},'%')

    </select>

</mapper>